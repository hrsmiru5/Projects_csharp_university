// This project involves managing stock market transaction data. It includes a C++ structure for transaction details and a C# Windows Forms implementation that visualizes stock data using a candlestick chart style, calculating maximum prices and dynamically scaling the drawing area.

using System;
using System.Drawing;
using System.Windows.Forms;

namespace Lucrare7{
    public partial class Form1:Form{
        struct DataPoint{
            public double Price;
            public string Val;
        }
        DataPoint[]data;
        public Form1(){
            InitializeComponent();
        }
        private double GetMaxPrice(){
            double max=data[0].Price;
            for(int i=1;i<data.Length;i++)
                if(data[i].Price>max)max=data[i].Price;
            return max;
        }
        private void Form1_Paint(object sender,PaintEventArgs e){
            Graphics g=e.Graphics;
            int max_h=ClientSize.Height-50;
            double max_price=GetMaxPrice();
            int candle_spacing=(ClientSize.Width-50)/data.Length;
            int candle_w=candle_spacing/2;
            Point[]candleCenters=new Point[data.Length];
            for(int i=0;i<data.Length;i++){
                int candleTop=(int)((data[i].Price/max_price)*max_h);
                int candleCenterX=i*candle_spacing+candle_spacing/2;
                candleCenters[i]=new Point(candleCenterX,max_h-candleTop);            
                int candle_left=i*candle_spacing+candle_spacing/2-candle_w/2;
                Brush b=data[i].Price>data[Math.Max(0,i-1)].Price?Brushes.MediumPurple:Brushes.DeepPink;
                g.FillRectangle(b,candle_left,max_h-candleTop,candle_w,candleTop); 
                int linex=candle_left+candle_w/2;
                g.DrawLine(Pens.Blue,linex,max_h-candleTop-15,linex,max_h-candleTop+80);
            }
            g.DrawLines(Pens.DarkSlateBlue,candleCenters);
        }
    }
}
